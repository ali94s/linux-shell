## BGP

BGP(BordBorder Gateway Protocol)边界网关协议是Internet上的路由协议，BGP选择最优的路由路径来传送网路流量。首先要说BGP需要先介绍下自治系统AS(Autonomous system)。

### AS(Autonomous system)

互联网是一个网络; 它被分解成数十万个称为自治系统（AS）的小型网络。这些网络本质上都是由单个组织运行的大型路由器池。自治系统是由单个组织管理的大型网络或网络组。AS可能有许多子网，但都共享相同的路由策略。通常，AS是ISP或具有自己的网络的非常大的组织，以及从该网络到ISP的多个上游连接（这称为“多宿主网络”）。每个AS都分配有自己的自治系统编号（ASN），以便轻松识别它们。

我们把BGP比喻为互联网的邮政服务，AS就像个人邮局分支机构一样。一个城镇可能有数百个邮箱，但这些邮箱中的邮件必须通过本地邮政分支才能被路由到另一个目的地。AS中的内部路由器就像邮箱一样，它们将出站传输转发给AS，AS然后使用BGP路由将这些传输传输到目的地。

### 内部BGP和外部BGP

- 内部BGP来路由自治域内部网络，这称为内部BGP，简称iBGP。应该注意，使用内部BGP不是使用外部BGP的要求。自治系统可以从许多内部协议中进行选择，以连接其内部网络上的路由器。
- 外部BGP就像国际航运; 在国际上发送邮件时需要遵循某些标准和准则。一旦该邮件到达其目的地国家，它必须通过目的地国家的本地邮件服务才能到达其最终目的地。每个国家/地区都有自己的内部邮件服务，不一定遵循与其他国家/地区相同的指导原则。类似地，每个自治系统可以具有其自己的内部路由协议，用于在其自己的网络内路由数据。

### BGP工作过程

BGP代表边界网关协议，它是Internet的路由协议。换句话说，它提供了方向，以便流量尽可能高效地从一个IP地址传输到另一个IP地址。IP地址是给定网站的实际Web地址。当用户键入网站名称并且浏览器找到并加载它时，请求和响应在用户的IP地址和网站的IP地址之间来回传递。DNS（域名系统）服务器提供IP地址，但BGP提供了最有效的方式来访问该IP地址。粗略地说，如果DNS是互联网的地址簿，那么BGP就是互联网的路线图。

每个BGP路由器存储一个路由表，其中包含自治系统之间的最佳路由。由于每个AS（通常是Internet服务提供商（ISP））广播他们拥有的新IP前缀，因此几乎不断更新这些内容。BGP总是倾向于从AS到AS的最短和最直接的路径，以便通过网络中尽可能少的跳跃来到达IP地址。

边界网关协议（BGP）相当于Internet的邮政服务。当有人将信件放入邮箱时，邮政服务处理该邮件并选择快速有效的路径将该信件发送给其收件人。同样，当有人通过Internet提交数据时，BGP负责查看数据可以传输的所有可用路径并选择最佳路由，这通常意味着在自治系统之间跳转。

BGP是使Internet工作的协议。它通过在Internet上启用数据路由来实现此目的。当国内的用户访问香港的网站时，BGP是使该通信快速有效地发生的协议，找到一个最优的路径达到香港。
